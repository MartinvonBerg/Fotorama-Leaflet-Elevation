/*!
 * Fotorama 4.6.4 | http://fotorama.io/license/
 */
fotoramaVersion="4.6.4",function(window,document,location,$,undefined){"use strict";var _fotoramaClass="fotorama",_fullscreenClass="fullscreen",wrapClass="fotorama__wrap",wrapCss2Class=wrapClass+"--css2",wrapCss3Class=wrapClass+"--css3",wrapVideoClass=wrapClass+"--video",wrapFadeClass=wrapClass+"--fade",wrapSlideClass=wrapClass+"--slide",wrapNoControlsClass=wrapClass+"--no-controls",wrapNoShadowsClass=wrapClass+"--no-shadows",wrapPanYClass=wrapClass+"--pan-y",wrapRtlClass=wrapClass+"--rtl",wrapOnlyActiveClass=wrapClass+"--only-active",wrapNoCaptionsClass=wrapClass+"--no-captions",wrapToggleArrowsClass=wrapClass+"--toggle-arrows",stageClass="fotorama__stage",stageFrameClass=stageClass+"__frame",stageFrameVideoClass=stageFrameClass+"--video",stageShaftClass=stageClass+"__shaft",grabClass="fotorama__grab",pointerClass="fotorama__pointer",arrClass="fotorama__arr",arrDisabledClass=arrClass+"--disabled",arrPrevClass=arrClass+"--prev",arrNextClass=arrClass+"--next",arrArrClass=arrClass+"__arr",navClass="fotorama__nav",navWrapClass=navClass+"-wrap",navShaftClass=navClass+"__shaft",navDotsClass=navClass+"--dots",navThumbsClass=navClass+"--thumbs",navFrameClass=navClass+"__frame",navFrameDotClass=navFrameClass+"--dot",navFrameThumbClass=navFrameClass+"--thumb",fadeClass="fotorama__fade",fadeFrontClass=fadeClass+"-front",fadeRearClass=fadeClass+"-rear",shadowClass,shadowsClass="fotorama__shadow"+"s",shadowsLeftClass=shadowsClass+"--left",shadowsRightClass=shadowsClass+"--right",activeClass="fotorama__active",selectClass="fotorama__select",hiddenClass="fotorama--hidden",fullscreenClass="fotorama--fullscreen",fullscreenIconClass="fotorama__fullscreen-icon",errorClass="fotorama__error",loadingClass="fotorama__loading",loadedClass="fotorama__loaded",loadedFullClass=loadedClass+"--full",loadedImgClass=loadedClass+"--img",grabbingClass="fotorama__grabbing",imgClass="fotorama__img",imgFullClass=imgClass+"--full",dotClass="fotorama__dot",thumbClass="fotorama__thumb",thumbBorderClass=thumbClass+"-border",htmlClass="fotorama__html",videoClass="fotorama__video",videoPlayClass=videoClass+"-play",videoCloseClass=videoClass+"-close",captionClass="fotorama__caption",captionWrapClass="fotorama__caption__wrap",spinnerClass="fotorama__spinner",buttonAttributes='" tabindex="0" role="button',JQUERY_VERSION=$&&$.fn.jquery.split(".");if(!JQUERY_VERSION||JQUERY_VERSION[0]<1||1==JQUERY_VERSION[0]&&JQUERY_VERSION[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var _={},Modernizr=function(window,document,undefined){var version="2.6.2",Modernizr={},docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem,toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),tests={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;)(node=document.createElement("div")).id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body?div:fakeBody).innerHTML+=style,fakeBody.appendChild(div),body||(fakeBody.style.background="",fakeBody.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(fakeBody)),ret=callback(div,rule),body?div.parentNode.removeChild(div):(fakeBody.parentNode.removeChild(fakeBody),docElement.style.overflow=docOverflow),!!ret},_hasOwnProperty={}.hasOwnProperty,hasOwnProp;function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&void 0!==mStyle[prop])return"pfx"!=prefixed||prop}return!1}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(void 0!==item)return!1===elem?props[i]:is(item,"function")?item.bind(elem||obj):item}return!1}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");return is(prefixed,"string")||is(prefixed,"undefined")?testProps(props,prefixed):testDOMProps(props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" "),prefixed,elem)}for(var feature in hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)},Function.prototype.bind||(Function.prototype.bind=function bind(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),tests.csstransforms3d=function(){var ret;return!!testPropsAll("perspective")},tests)hasOwnProp(tests,feature)&&(featureName=feature.toLowerCase(),Modernizr[featureName]=tests[feature](),classes.push((Modernizr[featureName]?"":"no-")+featureName));return Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{if(feature=feature.toLowerCase(),void 0!==Modernizr[feature])return Modernizr;test="function"==typeof test?test():test,"undefined"!=typeof enableClasses&&enableClasses&&(docElement.className+=" "+(test?"":"no-")+feature),Modernizr[feature]=test}return Modernizr},setCss(""),modElem=inputElem=null,Modernizr._version="2.6.2",Modernizr._prefixes=prefixes,Modernizr._domPrefixes=domPrefixes,Modernizr._cssomPrefixes=cssomPrefixes,Modernizr.testProp=function(prop){return testProps([prop])},Modernizr.testAllProps=testPropsAll,Modernizr.testStyles=injectElementWithStyles,Modernizr.prefixed=function(prop,obj,elem){return obj?testPropsAll(prop,obj,elem):testPropsAll(prop,"pfx")},Modernizr}(window,document),fullScreenApi={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if(void 0!==document.cancelFullScreen)fullScreenApi.ok=!0;else for(var i=0,il=browserPrefixes.length;i<il;i++)if(fullScreenApi.prefix=browserPrefixes[i],void 0!==document[fullScreenApi.prefix+"CancelFullScreen"]){fullScreenApi.ok=!0;break}fullScreenApi.ok&&(fullScreenApi.event=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.is=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.request=function(el){return""===this.prefix?el.requestFullScreen():el[this.prefix+"RequestFullScreen"]()},fullScreenApi.cancel=function(el){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});var Spinner,spinnerDefaults={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},spinnerOverride={top:"auto",left:"auto",className:""},root,factory;function bez(coOrdArray){var encodedFuncName="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof $.easing[encodedFuncName]){var polyBez=function(p1,p2){var A=[null,null],B=[null,null],C=[null,null],bezCoOrd=function(t,ax){return C[ax]=3*p1[ax],B[ax]=3*(p2[ax]-p1[ax])-C[ax],A[ax]=1-C[ax]-B[ax],t*(C[ax]+t*(B[ax]+t*A[ax]))},xDeriv=function(t){return C[0]+t*(2*B[0]+3*A[0]*t)},xForT=function(t){for(var x=t,i=0,z;++i<14&&(z=bezCoOrd(x,0)-t,!(Math.abs(z)<.001));)x-=z/xDeriv(x);return x};return function(t){return bezCoOrd(xForT(t),1)}};$.easing[encodedFuncName]=function(x,t,b,c,d){return c*polyBez([coOrdArray[0],coOrdArray[1]],[coOrdArray[2],coOrdArray[3]])(t/d)+b}}return encodedFuncName}root=this,factory=function(){var prefixes=["webkit","Moz","ms","O"],animations={},useCssAnimations;function createEl(tag,prop){var el=document.createElement(tag||"div"),n;for(n in prop)el[n]=prop[n];return el}function ins(parent){for(var i=1,n=arguments.length;i<n;i++)parent.appendChild(arguments[i]);return parent}var sheet=(el=createEl("style",{type:"text/css"}),ins(document.getElementsByTagName("head")[0],el),el.sheet||el.styleSheet),el;function addAnimation(alpha,trail,i,lines){var name=["opacity",trail,~~(100*alpha),i,lines].join("-"),start=.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf("Animation")).toLowerCase(),pre=prefix&&"-"+prefix+"-"||"";return animations[name]||(sheet.insertRule("@"+pre+"keyframes "+name+"{0%{opacity:"+z+"}"+start+"%{opacity:"+alpha+"}"+(start+.01)+"%{opacity:1}"+(start+trail)%100+"%{opacity:"+alpha+"}100%{opacity:"+z+"}}",sheet.cssRules.length),animations[name]=1),name}function vendor(el,prop){var s=el.style,pp,i;for(prop=prop.charAt(0).toUpperCase()+prop.slice(1),i=0;i<prefixes.length;i++)if(void 0!==s[pp=prefixes[i]+prop])return pp;if(void 0!==s[prop])return prop}function css(el,prop){for(var n in prop)el.style[vendor(el,n)||n]=prop[n];return el}function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def)void 0===obj[n]&&(obj[n]=def[n])}return obj}function pos(el){for(var o={x:el.offsetLeft,y:el.offsetTop};el=el.offsetParent;)o.x+=el.offsetLeft,o.y+=el.offsetTop;return o}function getColor(color,idx){return"string"==typeof color?color:color[idx%color.length]}var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function Spinner(o){if(void 0===this)return new Spinner(o);this.opts=merge(o||{},Spinner.defaults,defaults)}function initVML(){function vml(tag,attr){return createEl("<"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}sheet.addRule(".spin-vml","behavior:url(#default#VML)"),Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r;function grp(){return css(vml("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}var margin=2*-(o.width+o.length)+"px",g=css(grp(),{position:"absolute",top:margin,left:margin}),i;function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+"deg",left:~~dx}),ins(css(vml("roundrect",{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml("fill",{color:getColor(o.color,i),opacity:o.opacity}),vml("stroke",{opacity:0}))))}if(o.shadow)for(i=1;i<=o.lines;i++)seg(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)seg(i);return ins(el,g)},Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild;o=o.shadow&&o.lines||0,c&&i+o<c.childNodes.length&&(c=(c=(c=c.childNodes[i+o])&&c.firstChild)&&c.firstChild)&&(c.opacity=val)}}Spinner.defaults={},merge(Spinner.prototype,{spin:function(target){this.stop();var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width,ep,tp;if(target&&(target.insertBefore(el,target.firstChild||null),tp=pos(target),ep=pos(el),css(el,{left:("auto"==o.left?tp.x-ep.x+(target.offsetWidth>>1):parseInt(o.left,10)+mid)+"px",top:("auto"==o.top?tp.y-ep.y+(target.offsetHeight>>1):parseInt(o.top,10)+mid)+"px"})),el.setAttribute("role","progressbar"),self.lines(el,self.opts),!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;!function anim(){i++;for(var j=0;j<o.lines;j++)alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity),self.opacity(el,j*o.direction+start,alpha,o);self.timeout=self.el&&setTimeout(anim,~~(1e3/fps))}()}return self},stop:function(){var el=this.el;return el&&(clearTimeout(this.timeout),el.parentNode&&el.parentNode.removeChild(el),this.el=void 0),this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg;function fill(color,shadow){return css(createEl(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:color,boxShadow:shadow,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*i+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(;i<o.lines;i++)seg=css(createEl(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&ins(seg,css(fill("#000","0 0 4px #000"),{top:"2px"})),ins(el,ins(seg,fill(getColor(o.color,i),"0 0 1px rgba(0,0,0,.1)")));return el},opacity:function(el,i,val){i<el.childNodes.length&&(el.childNodes[i].style.opacity=val)}});var probe=css(createEl("group"),{behavior:"url(#default#VML)"});return!vendor(probe,"transform")&&probe.adj?initVML():useCssAnimations=vendor(probe,"animation"),Spinner},Spinner=factory();var $WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,QUIRKS_FORCE="quirks"===location.hash.replace("#",""),TRANSFORMS3D=Modernizr.csstransforms3d,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,COMPAT=TRANSFORMS3D||"CSS1Compat"===document.compatMode,FULLSCREEN=fullScreenApi.ok,MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,MS_POINTER=navigator.msPointerEnabled,WHEEL="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",TOUCH_TIMEOUT=250,TRANSITION_DURATION=300,SCROLL_LOCK_TIMEOUT=1400,AUTOPLAY_INTERVAL=5e3,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,STAGE_FRAME_KEY="$stageFrame",NAV_DOT_FRAME_KEY="$navDotFrame",NAV_THUMB_FRAME_KEY="$navThumbFrame",AUTO="auto",BEZIER=bez([.1,0,.25,1]),MAX_WIDTH=99999,FIFTYFIFTY="50%",OPTIONS={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:2,glimpse:0,fit:"contain",position:"50%",thumbposition:"50%",nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:64,thumbheight:64,thumbmargin:2,thumbborderwidth:2,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:300,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},KEYBOARD_OPTIONS={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1},lastEvent,moveEventType,preventEvent,preventEventTimeout;function noop(){}function minMaxLimit(value,min,max){return Math.max(isNaN(min)?-1/0:min,Math.min(isNaN(max)?1/0:max,value))}function readTransform(css){return css.match(/ma/)&&css.match(/-?\d+(?!d)/g)[css.match(/3d/)?12:4]}function readPosition($el){return CSS3?+readTransform($el.css("transform")):+$el.css("left").replace("px","")}function getTranslate(pos){var obj={};return CSS3?obj.transform="translate3d("+pos+"px,0,0)":obj.left=pos,obj}function getDuration(time){return{"transition-duration":time+"ms"}}function unlessNaN(value,alternative){return isNaN(value)?alternative:value}function numberFromMeasure(value,measure){return unlessNaN(+String(value).replace(measure||"px",""))}function numberFromPercent(value){return/%$/.test(value)?numberFromMeasure(value,"%"):void 0}function numberFromWhatever(value,whole){return unlessNaN(numberFromPercent(value)/100*whole,numberFromMeasure(value))}function measureIsValid(value){return(!isNaN(numberFromMeasure(value))||!isNaN(numberFromMeasure(value,"%")))&&value}function getPosByIndex(index,side,margin,baseIndex){return(index-(baseIndex||0))*(side+(margin||0))}function getIndexByPos(pos,side,margin,baseIndex){return-Math.round(pos/(side+(margin||0))-(baseIndex||0))}function bindTransitionEnd($el){var elData=$el.data(),el,transitionEndEvent;elData.tEnd||(addEvent($el[0],{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],(function(e){elData.tProp&&e.propertyName.match(elData.tProp)&&elData.onEndFn()})),elData.tEnd=!0)}function afterTransition($el,property,fn,time){var ok,elData=$el.data();elData&&(elData.onEndFn=function(){ok||(ok=!0,clearTimeout(elData.tT),fn())},elData.tProp=property,clearTimeout(elData.tT),elData.tT=setTimeout((function(){elData.onEndFn()}),1.5*time),bindTransitionEnd($el))}function stop($el,left){if($el.length){var elData=$el.data();CSS3?($el.css(getDuration(0)),elData.onEndFn=noop,clearTimeout(elData.tT)):$el.stop();var lockedLeft=getNumber(left,(function(){return readPosition($el)}));return $el.css(getTranslate(lockedLeft)),lockedLeft}}function getNumber(){for(var number,_i=0,_l=arguments.length;_i<_l&&"number"!=typeof(number=_i?arguments[_i]():arguments[_i]);_i++);return number}function edgeResistance(pos,edge){return Math.round(pos+(edge-pos)/1.5)}function getProtocol(){return getProtocol.p=getProtocol.p||("https:"===location.protocol?"https://":"http://"),getProtocol.p}function parseHref(href){var a=document.createElement("a");return a.href=href,a}function findVideoId(href,forceVideo){if("string"!=typeof href)return href;var id,type;if((href=parseHref(href)).host.match(/youtube\.com/)&&href.search){if(id=href.search.split("v=")[1]){var ampersandPosition=id.indexOf("&");-1!==ampersandPosition&&(id=id.substring(0,ampersandPosition)),type="youtube"}}else href.host.match(/youtube\.com|youtu\.be/)?(id=href.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),type="youtube"):href.host.match(/vimeo\.com/)&&(type="vimeo",id=href.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return id&&type||!forceVideo||(id=href.href,type="custom"),!!id&&{id:id,type:type,s:href.search.replace(/^\?/,""),p:getProtocol()}}function getVideoThumbs(dataFrame,data,fotorama){var img,thumb,video=dataFrame.video;return"youtube"===video.type?(img=(thumb=getProtocol()+"img.youtube.com/vi/"+video.id+"/default.jpg").replace(/\/default.jpg$/,"/hqdefault.jpg"),dataFrame.thumbsReady=!0):"vimeo"===video.type?$.ajax({url:getProtocol()+"vimeo.com/api/v2/video/"+video.id+".json",dataType:"jsonp",success:function(json){dataFrame.thumbsReady=!0,updateData(data,{img:json[0].thumbnail_large,thumb:json[0].thumbnail_small},dataFrame.i,fotorama)}}):dataFrame.thumbsReady=!0,{img:img,thumb:thumb}}function updateData(data,_dataFrame,i,fotorama){for(var _i=0,_l=data.length;_i<_l;_i++){var dataFrame=data[_i];if(dataFrame.i===i&&dataFrame.thumbsReady){var clear={videoReady:!0};clear.$stageFrame=clear.$navThumbFrame=clear.$navDotFrame=!1,fotorama.splice(_i,1,$.extend({},dataFrame,clear,_dataFrame));break}}}function getDataFromHtml($el){var data=[];function getDataFromImg($img,imgData,checkVideo){var $child=$img.children("img").eq(0),_imgHref=$img.attr("href"),_imgSrc=$img.attr("src"),_thumbSrc=$child.attr("src"),_video=imgData.video,video=!!checkVideo&&findVideoId(_imgHref,!0===_video);video?_imgHref=!1:video=_video,getDimensions($img,$child,$.extend(imgData,{video:video,img:imgData.img||_imgHref||_imgSrc||_thumbSrc,thumb:imgData.thumb||_thumbSrc||_imgSrc||_imgHref}))}function getDimensions($img,$child,imgData){var separateThumbFLAG=imgData.thumb&&imgData.img!==imgData.thumb,width=numberFromMeasure(imgData.width||$img.attr("width")),height=numberFromMeasure(imgData.height||$img.attr("height")),alt=$child.attr("alt"),title=$child.attr("title");alt||(alt=""),title||(title=""),alt&&$.extend(imgData,{alt:alt}),title&&$.extend(imgData,{title:title}),$.extend(imgData,{width:width,height:height,thumbratio:getRatio(imgData.thumbratio||numberFromMeasure(imgData.thumbwidth||$child&&$child.attr("width")||separateThumbFLAG||width)/numberFromMeasure(imgData.thumbheight||$child&&$child.attr("height")||separateThumbFLAG||height))})}return $el.children().each((function(){var $this=$(this),dataFrame=optionsToLowerCase($.extend($this.data(),{id:$this.attr("id")}));if($this.is("a, img"))getDataFromImg($this,dataFrame,!0);else{if($this.is(":empty"))return;getDimensions($this,null,$.extend(dataFrame,{html:this,_html:$this.html()}))}data.push(dataFrame)})),data}function isHidden(el){return 0===el.offsetWidth&&0===el.offsetHeight}function isDetached(el){return!$.contains(document.documentElement,el)}function waitFor(test,fn,timeout,i){return waitFor.i||(waitFor.i=1,waitFor.ii=[!0]),i=i||waitFor.i,void 0===waitFor.ii[i]&&(waitFor.ii[i]=!0),test()?fn():waitFor.ii[i]&&setTimeout((function(){waitFor.ii[i]&&waitFor(test,fn,timeout,i)}),timeout||100),waitFor.i++}function setHash(hash){location.replace(location.protocol+"//"+location.host+location.pathname.replace(/^\/?/,"/")+location.search+"#"+hash)}function fit($el,measuresToFit,method,position){var elData=$el.data(),measures=elData.measures;if(measures&&(!elData.l||elData.l.W!==measures.width||elData.l.H!==measures.height||elData.l.r!==measures.ratio||elData.l.w!==measuresToFit.w||elData.l.h!==measuresToFit.h||elData.l.m!==method||elData.l.p!==position)){var width=measures.width,height=measures.height,ratio=measuresToFit.w/measuresToFit.h,biggerRatioFLAG=measures.ratio>=ratio,fitFLAG="scaledown"===method,containFLAG="contain"===method,coverFLAG="cover"===method,pos=parsePosition(position);biggerRatioFLAG&&(fitFLAG||containFLAG)||!biggerRatioFLAG&&coverFLAG?height=(width=minMaxLimit(measuresToFit.w,0,fitFLAG?width:1/0))/measures.ratio:(biggerRatioFLAG&&coverFLAG||!biggerRatioFLAG&&(fitFLAG||containFLAG))&&(width=(height=minMaxLimit(measuresToFit.h,0,fitFLAG?height:1/0))*measures.ratio),$el.css({width:width,height:height,left:numberFromWhatever(pos.x,measuresToFit.w-width),top:numberFromWhatever(pos.y,measuresToFit.h-height)}),elData.l={W:measures.width,H:measures.height,r:measures.ratio,w:measuresToFit.w,h:measuresToFit.h,m:method,p:position}}return!0}function setStyle($el,style){var el=$el[0];el.styleSheet?el.styleSheet.cssText=style:$el.html(style)}function findShadowEdge(pos,min,max){return min!==max&&(pos<=min?"left":pos>=max?"right":"left right")}function getIndexFromHash(hash,data,ok,startindex){if(!ok)return!1;if(!isNaN(hash))return hash-(startindex?0:1);for(var index,_i=0,_l=data.length;_i<_l;_i++){var dataFrame;if(data[_i].id===hash){index=_i;break}}return index}function smartClick($el,fn,_options){_options=_options||{},$el.each((function(){var $this=$(this),thisData=$this.data(),startEvent;thisData.clickOn||(thisData.clickOn=!0,$.extend(touch($this,{onStart:function(e){startEvent=e,(_options.onStart||noop).call(this,e)},onMove:_options.onMove||noop,onTouchEnd:_options.onTouchEnd||noop,onEnd:function(result){result.moved||fn.call(this,startEvent)}}),{noMove:!0}))}))}function div(classes,child){return'<div class="'+classes+'">'+(child||"")+"</div>"}function shuffle(array){for(var l=array.length;l;){var i=Math.floor(Math.random()*l--),t=array[l];array[l]=array[i],array[i]=t}return array}function clone(array){return"[object Array]"==Object.prototype.toString.call(array)&&$.map(array,(function(frame){return $.extend({},frame)}))}function lockScroll($el,left,top){$el.scrollLeft(left||0).scrollTop(top||0)}function optionsToLowerCase(options){if(options){var opts={};return $.each(options,(function(key,value){opts[key.toLowerCase()]=value})),opts}}function getRatio(_ratio){if(_ratio){var ratio=+_ratio;return isNaN(ratio)?+(ratio=_ratio.split("/"))[0]/+ratio[1]||void 0:ratio}}function addEvent(el,e,fn,bool){e&&(el.addEventListener?el.addEventListener(e,fn,!!bool):el.attachEvent("on"+e,fn))}function elIsDisabled(el){return!!el.getAttribute("disabled")}function disableAttr(FLAG){return{tabindex:-1*FLAG+"",disabled:FLAG}}function addEnterUp(el,fn){addEvent(el,"keyup",(function(e){elIsDisabled(el)||13==e.keyCode&&fn.call(el,e)}))}function addFocus(el,fn){addEvent(el,"focus",el.onfocusin=function(e){fn.call(el,e)},!0)}function stopEvent(e,stopPropagation){e.preventDefault?e.preventDefault():e.returnValue=!1,stopPropagation&&e.stopPropagation&&e.stopPropagation()}function getDirectionSign(forward){return forward?">":"<"}function parsePosition(rule){return{x:measureIsValid((rule=(rule+"").split(/\s+/))[0])||"50%",y:measureIsValid(rule[1])||"50%"}}function slide($el,options){var elData=$el.data(),elPos=Math.round(options.pos),onEndFn=function(){elData.sliding=!1,(options.onEnd||noop)()};void 0!==options.overPos&&options.overPos!==options.pos&&(elPos=options.overPos,onEndFn=function(){slide($el,$.extend({},options,{overPos:options.pos,time:Math.max(300,options.time/2)}))});var translate=$.extend(getTranslate(elPos),options.width&&{width:options.width});elData.sliding=!0,CSS3?($el.css($.extend(getDuration(options.time),translate)),options.time>10?afterTransition($el,"transform",onEndFn,options.time):onEndFn()):$el.stop().animate(translate,options.time,BEZIER,onEndFn)}function fade($el1,$el2,$frames,options,fadeStack,chain){var chainedFLAG=void 0!==chain;if(chainedFLAG||(fadeStack.push(arguments),Array.prototype.push.call(arguments,fadeStack.length),!(fadeStack.length>1))){$el1=$el1||$($el1),$el2=$el2||$($el2);var _$el1=$el1[0],_$el2=$el2[0],crossfadeFLAG="crossfade"===options.method,onEndFn=function(){if(!onEndFn.done){onEndFn.done=!0;var args=(chainedFLAG||fadeStack.shift())&&fadeStack.shift();args&&fade.apply(this,args),(options.onEnd||noop)(!!args)}},time=options.time/(chain||1);$frames.removeClass(fadeRearClass+" "+fadeFrontClass),$el1.stop().addClass(fadeRearClass),$el2.stop().addClass(fadeFrontClass),crossfadeFLAG&&_$el2&&$el1.fadeTo(0,0),$el1.fadeTo(crossfadeFLAG?time:0,1,crossfadeFLAG&&onEndFn),$el2.fadeTo(time,0,onEndFn),_$el1&&crossfadeFLAG||_$el2||onEndFn()}}function extendEvent(e){var touch=(e.touches||[])[0]||e;e._x=touch.pageX,e._y=touch.clientY,e._now=$.now()}function touch($el,options){var el=$el[0],tail={},touchEnabledFLAG,startEvent,$target,controlTouch,touchFLAG,targetIsSelectFLAG,targetIsLinkFlag,tolerance,moved;function onStart(e){if($target=$(e.target),tail.checked=targetIsSelectFLAG=targetIsLinkFlag=moved=!1,touchEnabledFLAG||tail.flow||e.touches&&e.touches.length>1||e.which>1||lastEvent&&lastEvent.type!==e.type&&preventEvent||(targetIsSelectFLAG=options.select&&$target.is(options.select,el)))return targetIsSelectFLAG;touchFLAG="touchstart"===e.type,targetIsLinkFlag=$target.is("a, a *",el),controlTouch=tail.control,tolerance=tail.noMove||tail.noSwipe||controlTouch?16:tail.snap?0:4,extendEvent(e),startEvent=lastEvent=e,moveEventType=e.type.replace(/down|start/,"move").replace(/Down/,"Move"),(options.onStart||noop).call(el,e,{control:controlTouch,$target:$target}),touchEnabledFLAG=tail.flow=!0,touchFLAG&&!tail.go||stopEvent(e)}function onMove(e){if(e.touches&&e.touches.length>1||MS_POINTER&&!e.isPrimary||moveEventType!==e.type||!touchEnabledFLAG)return touchEnabledFLAG&&onEnd(),void(options.onTouchEnd||noop)();extendEvent(e);var xDiff=Math.abs(e._x-startEvent._x),yDiff=Math.abs(e._y-startEvent._y),xyDiff=xDiff-yDiff,xWin=(tail.go||tail.x||xyDiff>=0)&&!tail.noSwipe,yWin=xyDiff<0;touchFLAG&&!tail.checked?(touchEnabledFLAG=xWin)&&stopEvent(e):(stopEvent(e),(options.onMove||noop).call(el,e,{touch:touchFLAG})),!moved&&Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2))>tolerance&&(moved=!0),tail.checked=tail.checked||xWin||yWin}function onEnd(e){(options.onTouchEnd||noop)();var _touchEnabledFLAG=touchEnabledFLAG;tail.control=touchEnabledFLAG=!1,_touchEnabledFLAG&&(tail.flow=!1),!_touchEnabledFLAG||targetIsLinkFlag&&!tail.checked||(e&&stopEvent(e),preventEvent=!0,clearTimeout(preventEventTimeout),preventEventTimeout=setTimeout((function(){preventEvent=!1}),1e3),(options.onEnd||noop).call(el,{moved:moved,$target:$target,control:controlTouch,touch:touchFLAG,startEvent:startEvent,aborted:!e||"MSPointerCancel"===e.type}))}function onOtherStart(){tail.flow||setTimeout((function(){tail.flow=!0}),10)}function onOtherEnd(){tail.flow&&setTimeout((function(){tail.flow=!1}),250)}return MS_POINTER?(addEvent(el,"MSPointerDown",onStart),addEvent(document,"MSPointerMove",onMove),addEvent(document,"MSPointerCancel",onEnd),addEvent(document,"MSPointerUp",onEnd)):(addEvent(el,"touchstart",onStart),addEvent(el,"touchmove",onMove),addEvent(el,"touchend",onEnd),addEvent(document,"touchstart",onOtherStart),addEvent(document,"touchend",onOtherEnd),addEvent(document,"touchcancel",onOtherEnd),$WINDOW.on("scroll",onOtherEnd),$el.on("mousedown",onStart),$DOCUMENT.on("mousemove",onMove).on("mouseup",onEnd)),$el.on("click","a",(function(e){tail.checked&&stopEvent(e)})),tail}function moveOnTouch($el,options){var el=$el[0],elData=$el.data(),tail={},startCoo,coo,startElPos,moveElPos,edge,moveTrack,startTime,endTime,min,max,snap,slowFLAG,controlFLAG,moved,tracked;function startTracking(e,noStop){tracked=!0,startCoo=coo=e._x,startTime=e._now,moveTrack=[[startTime,startCoo]],startElPos=moveElPos=tail.noMove||noStop?0:stop($el,(options.getPos||noop)()),(options.onStart||noop).call(el,e)}function onStart(e,result){min=tail.min,max=tail.max,snap=tail.snap,slowFLAG=e.altKey,tracked=moved=!1,(controlFLAG=result.control)||elData.sliding||startTracking(e)}function onMove(e,result){tail.noSwipe||(tracked||startTracking(e),coo=e._x,moveTrack.push([e._now,coo]),edge=findShadowEdge(moveElPos=startElPos-(startCoo-coo),min,max),moveElPos<=min?moveElPos=edgeResistance(moveElPos,min):moveElPos>=max&&(moveElPos=edgeResistance(moveElPos,max)),tail.noMove||($el.css(getTranslate(moveElPos)),moved||(moved=!0,result.touch||MS_POINTER||$el.addClass(grabbingClass)),(options.onMove||noop).call(el,e,{pos:moveElPos,edge:edge})))}function onEnd(result){if(!tail.noSwipe||!result.moved){tracked||startTracking(result.startEvent,!0),result.touch||MS_POINTER||$el.removeClass(grabbingClass);for(var _backTimeIdeal=(endTime=$.now())-250,_backTime,_timeDiff,_timeDiffLast,backTime=null,backCoo,virtualPos,limitPos,newPos,overPos,time=300,speed,friction=options.friction,_i=moveTrack.length-1;_i>=0;_i--){if(_backTime=moveTrack[_i][0],_timeDiff=Math.abs(_backTime-_backTimeIdeal),null===backTime||_timeDiff<_timeDiffLast)backTime=_backTime,backCoo=moveTrack[_i][1];else if(backTime===_backTimeIdeal||_timeDiff>_timeDiffLast)break;_timeDiffLast=_timeDiff}newPos=minMaxLimit(moveElPos,min,max);var cooDiff=backCoo-coo,forwardFLAG=cooDiff>=0,timeDiff=endTime-backTime,longTouchFLAG=timeDiff>250,swipeFLAG=!longTouchFLAG&&moveElPos!==startElPos&&newPos===moveElPos;snap&&(newPos=minMaxLimit(Math[swipeFLAG?forwardFLAG?"floor":"ceil":"round"](moveElPos/snap)*snap,min,max),min=max=newPos),swipeFLAG&&(snap||newPos===moveElPos)&&(speed=-cooDiff/timeDiff,time*=minMaxLimit(Math.abs(speed),options.timeLow,options.timeHigh),virtualPos=Math.round(moveElPos+speed*time/friction),snap||(newPos=virtualPos),(!forwardFLAG&&virtualPos>max||forwardFLAG&&virtualPos<min)&&(limitPos=forwardFLAG?min:max,snap||(newPos=limitPos),overPos=minMaxLimit(newPos+.03*(overPos=virtualPos-limitPos),limitPos-50,limitPos+50),time=Math.abs((moveElPos-overPos)/(speed/friction)))),time*=slowFLAG?10:1,(options.onEnd||noop).call(el,$.extend(result,{moved:result.moved||longTouchFLAG&&snap,pos:moveElPos,newPos:newPos,overPos:overPos,time:time}))}}return tail=$.extend(touch(options.$wrap,$.extend({},options,{onStart:onStart,onMove:onMove,onEnd:onEnd})),tail)}function wheel($el,options){var el=$el[0],lockFLAG,lastDirection,lastNow,tail={prevent:{}};return addEvent(el,WHEEL,(function(e){var yDelta=e.wheelDeltaY||-1*e.deltaY||0,xDelta=e.wheelDeltaX||-1*e.deltaX||0,xWin=Math.abs(xDelta)&&!Math.abs(yDelta),direction=getDirectionSign(xDelta<0),sameDirection=lastDirection===direction,now=$.now(),tooFast=now-lastNow<250;lastDirection=direction,lastNow=now,xWin&&tail.ok&&(!tail.prevent[direction]||lockFLAG)&&(stopEvent(e,!0),lockFLAG&&sameDirection&&tooFast||(options.shift&&(lockFLAG=!0,clearTimeout(tail.t),tail.t=setTimeout((function(){lockFLAG=!1}),1400)),(options.onEnd||noop)(e,options.shift?direction:xDelta)))})),tail}function calculateIndexes(){$.each($.Fotorama.instances,(function(index,instance){instance.index=index}))}function addInstance(instance){$.Fotorama.instances.push(instance),calculateIndexes()}function hideInstance(instance){$.Fotorama.instances.splice(instance.index,1),calculateIndexes()}waitFor.stop=function(i){waitFor.ii[i]=!1},jQuery.Fotorama=function($fotorama,opts){$HTML=$("html"),$BODY=$("body");var that=this,stamp=$.now(),stampClass="fotorama"+stamp,fotorama=$fotorama[0],data,dataFrameCount=1,fotoramaData=$fotorama.data(),size,$style=$("<style></style>"),$anchor=$(div(hiddenClass)),$wrap=$(div(wrapClass)),$stage=$(div(stageClass)).appendTo($wrap),stage=$stage[0],$stageShaft=$(div(stageShaftClass)).appendTo($stage),$stageFrame=$(),$arrPrev=$(div(arrClass+" "+arrPrevClass+buttonAttributes)),$arrNext=$(div(arrClass+" "+arrNextClass+buttonAttributes)),$arrs=$arrPrev.add($arrNext).appendTo($stage),$navWrap=$(div(navWrapClass)),$nav=$(div(navClass)).appendTo($navWrap),$navShaft=$(div(navShaftClass)).appendTo($nav),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$thumbBorder=$(div(thumbBorderClass)).appendTo($navShaft),$fullscreenIcon=$(div(fullscreenIconClass+buttonAttributes)),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div(videoPlayClass)),$videoClose,videoClose=$(div(videoCloseClass)).appendTo($stage)[0],spinner,$spinner=$(div(spinnerClass)),$videoPlaying,activeIndex=!1,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,nextAutoplayIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,lastOptions={},measures={},measuresSetFLAG,stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,toDeactivate={},toDetach={},measuresStash,touchedFLAG,hoverFLAG,navFrameKey,stageLeft=0,fadeStack=[];function checkForVideo(){$.each(data,(function(i,dataFrame){if(!dataFrame.i){dataFrame.i=dataFrameCount++;var video=findVideoId(dataFrame.video,!0);if(video){var thumbs={};dataFrame.video=video,dataFrame.img||dataFrame.thumb?dataFrame.thumbsReady=!0:thumbs=getVideoThumbs(dataFrame,data,that),updateData(data,{img:thumbs.img,thumb:thumbs.thumb},dataFrame.i,that)}}}))}function allowKey(key){return o_keyboard[key]||that.fullScreen}function bindGlobalEvents(FLAG){var keydownCommon="keydown.fotorama",localStamp="fotorama"+stamp,keydownLocal="keydown."+localStamp,resizeLocal="resize."+localStamp+" orientationchange."+localStamp;FLAG?($DOCUMENT.on(keydownLocal,(function(e){var catched,index;$videoPlaying&&27===e.keyCode?(catched=!0,unloadVideo($videoPlaying,!0,!0)):(that.fullScreen||opts.keyboard&&!that.index)&&(27===e.keyCode?(catched=!0,that.cancelFullScreen()):e.shiftKey&&32===e.keyCode&&allowKey("space")||37===e.keyCode&&allowKey("left")||38===e.keyCode&&allowKey("up")?index="<":32===e.keyCode&&allowKey("space")||39===e.keyCode&&allowKey("right")||40===e.keyCode&&allowKey("down")?index=">":36===e.keyCode&&allowKey("home")?index="<<":35===e.keyCode&&allowKey("end")&&(index=">>")),(catched||index)&&stopEvent(e),index&&that.show({index:index,slow:e.altKey,user:!0})})),that.index||$DOCUMENT.off(keydownCommon).on(keydownCommon,"textarea, input, select",(function(e){!$BODY.hasClass("fullscreen")&&e.stopPropagation()})),$WINDOW.on(resizeLocal,that.resize)):($DOCUMENT.off(keydownLocal),$WINDOW.off(resizeLocal))}function appendElements(FLAG){FLAG!==appendElements.f&&(FLAG?($fotorama.html("").addClass("fotorama "+stampClass).append($wrap).before($style).before($anchor),addInstance(that)):($wrap.detach(),$style.detach(),$anchor.detach(),$fotorama.html(fotoramaData.urtext).removeClass(stampClass),hideInstance(that)),bindGlobalEvents(FLAG),appendElements.f=FLAG)}function setData(){data=that.data=data||clone(opts.data)||getDataFromHtml($fotorama),size=that.size=data.length,!ready.ok&&opts.shuffle&&shuffle(data),checkForVideo(),activeIndex=limitIndex(activeIndex),size&&appendElements(!0)}function stageNoMove(){var _noMove=size<2&&!opts.enableifsingleframe||$videoPlaying;stageShaftTouchTail.noMove=_noMove||o_fade,stageShaftTouchTail.noSwipe=_noMove||!opts.swipe,!o_transition&&$stageShaft.toggleClass(grabClass,!opts.click&&!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe),MS_POINTER&&$wrap.toggleClass(wrapPanYClass,!stageShaftTouchTail.noSwipe)}function setAutoplayInterval(interval){!0===interval&&(interval=""),opts.autoplay=Math.max(+interval||5e3,1.5*o_transitionDuration)}function setOptions(){that.options=opts=optionsToLowerCase(opts),o_fade="crossfade"===opts.transition||"dissolve"===opts.transition,o_loop=opts.loop&&(size>2||o_fade&&(!o_transition||"slide"!==o_transition)),o_transitionDuration=+opts.transitionduration||300,o_rtl="rtl"===opts.direction,o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard);var classes={add:[],remove:[]};function addOrRemoveClass(FLAG,value){classes[FLAG?"add":"remove"].push(value)}size>1||opts.enableifsingleframe?(o_nav=opts.nav,o_navTop="top"===opts.navposition,classes.remove.push(selectClass),$arrs.toggle(!!opts.arrows)):(o_nav=!1,$arrs.hide()),spinnerStop(),spinner=new Spinner($.extend(spinnerDefaults,opts.spinner,spinnerOverride,{direction:o_rtl?-1:1})),arrsUpdate(),stageWheelUpdate(),opts.autoplay&&setAutoplayInterval(opts.autoplay),o_thumbSide=numberFromMeasure(opts.thumbwidth)||64,o_thumbSide2=numberFromMeasure(opts.thumbheight)||64,stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW,stageNoMove(),extendMeasures(opts,[measures]),(o_navThumbs="thumbs"===o_nav)?(frameDraw(size,"navThumb"),$navFrame=$navThumbFrame,navFrameKey="$navThumbFrame",setStyle($style,$.Fotorama.jst.style({w:o_thumbSide,h:o_thumbSide2,b:opts.thumbborderwidth,m:opts.thumbmargin,s:stamp,q:!COMPAT})),$nav.addClass(navThumbsClass).removeClass(navDotsClass)):"dots"===o_nav?(frameDraw(size,"navDot"),$navFrame=$navDotFrame,navFrameKey="$navDotFrame",$nav.addClass(navDotsClass).removeClass(navThumbsClass)):(o_nav=!1,$nav.removeClass(navThumbsClass+" "+navDotsClass)),o_nav&&(o_navTop?$navWrap.insertBefore($stage):$navWrap.insertAfter($stage),frameAppend.nav=!1,frameAppend($navFrame,$navShaft,"nav")),(o_allowFullScreen=opts.allowfullscreen)?($fullscreenIcon.prependTo($stage),o_nativeFullScreen=FULLSCREEN&&"native"===o_allowFullScreen):($fullscreenIcon.detach(),o_nativeFullScreen=!1),addOrRemoveClass(o_fade,wrapFadeClass),addOrRemoveClass(!o_fade,wrapSlideClass),addOrRemoveClass(!opts.captions,wrapNoCaptionsClass),addOrRemoveClass(o_rtl,wrapRtlClass),addOrRemoveClass("always"!==opts.arrows,wrapToggleArrowsClass),addOrRemoveClass(!(o_shadows=opts.shadows&&!SLOW),wrapNoShadowsClass),$wrap.addClass(classes.add.join(" ")).removeClass(classes.remove.join(" ")),lastOptions=$.extend({},opts)}function normalizeIndex(index){return index<0?(size+index%size)%size:index>=size?index%size:index}function limitIndex(index){return minMaxLimit(index,0,size-1)}function edgeIndex(index){return o_loop?normalizeIndex(index):limitIndex(index)}function getPrevIndex(index){return!!(index>0||o_loop)&&index-1}function getNextIndex(index){return!!(index<size-1||o_loop)&&index+1}function setStageShaftMinmaxAndSnap(){stageShaftTouchTail.min=o_loop?-1/0:-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.max=o_loop?1/0:-getPosByIndex(0,measures.w,opts.margin,repositionIndex),stageShaftTouchTail.snap=measures.w+opts.margin}function setNavShaftMinMax(){navShaftTouchTail.min=Math.min(0,measures.nw-$navShaft.width()),navShaftTouchTail.max=0,$navShaft.toggleClass(grabClass,!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max))}function eachIndex(indexes,type,fn){if("number"==typeof indexes){indexes=new Array(indexes);var rangeFLAG=!0}return $.each(indexes,(function(i,index){if(rangeFLAG&&(index=i),"number"==typeof index){var dataFrame=data[normalizeIndex(index)];if(dataFrame){var key="$"+type+"Frame",$frame=dataFrame[key];fn.call(this,i,index,dataFrame,$frame,key,$frame&&$frame.data())}}}))}function setMeasures(width,height,ratio,index){(!measuresSetFLAG||"*"===measuresSetFLAG&&index===startIndex)&&(width=measureIsValid(opts.width)||measureIsValid(width)||500,height=measureIsValid(opts.height)||measureIsValid(height)||333,that.resize({width:width,ratio:opts.ratio||ratio||width/height},0,index!==startIndex&&"*"))}function loadImg(indexes,type,specialMeasures,method,position,again){eachIndex(indexes,type,(function(i,index,dataFrame,$frame,key,frameData){if($frame){var fullFLAG=that.fullScreen&&dataFrame.full&&dataFrame.full!==dataFrame.img&&!frameData.$full&&"stage"===type;if(!frameData.$img||again||fullFLAG){var img=new Image,$img=$(img),imgData=$img.data();frameData[fullFLAG?"$full":"$img"]=$img;var srcKey="stage"===type?fullFLAG?"full":"img":"thumb",src=dataFrame[srcKey],dummy=fullFLAG?null:dataFrame["stage"===type?"thumb":"img"];"navThumb"===type&&($frame=frameData.$wrap),src?($.Fotorama.cache[src]?function justWait(){"error"===$.Fotorama.cache[src]?error():"loaded"===$.Fotorama.cache[src]?setTimeout(waitAndLoad,0):setTimeout(justWait,100)}():($.Fotorama.cache[src]="*",$img.on("load",waitAndLoad).on("error",error)),frameData.state="",frameData.data.hasOwnProperty("alt")&&(img.alt=frameData.data.alt),frameData.data.hasOwnProperty("title")&&(img.title=frameData.data.title),img.src=src):error()}}function triggerTriggerEvent(event){var _index=normalizeIndex(index);triggerEvent(event,{index:_index,src:src,frame:data[_index]})}function error(){$img.remove(),$.Fotorama.cache[src]="error",dataFrame.html&&"stage"===type||!dummy||dummy===src?(!src||dataFrame.html||fullFLAG?"stage"===type&&($frame.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass(loadedClass),triggerTriggerEvent("load"),setMeasures()):($frame.trigger("f:error").removeClass(loadingClass).addClass(errorClass),triggerTriggerEvent("error")),frameData.state="error",!(size>1&&data[index]===dataFrame)||dataFrame.html||dataFrame.deleted||dataFrame.video||fullFLAG||(dataFrame.deleted=!0,that.splice(index,1))):(dataFrame[srcKey]=src=dummy,loadImg([index],type,specialMeasures,method,position,!0))}function loaded(){$.Fotorama.measures[src]=imgData.measures=$.Fotorama.measures[src]||{width:img.width,height:img.height,ratio:img.width/img.height},setMeasures(imgData.measures.width,imgData.measures.height,imgData.measures.ratio,index),$img.off("load error").addClass(imgClass+(fullFLAG?" "+imgFullClass:"")).prependTo($frame);let checkfunc=!1;checkfunc="function"==typeof specialMeasures,fit($img,(checkfunc?specialMeasures():specialMeasures)||measures,method||dataFrame.fit||opts.fit,position||dataFrame.position||opts.position),$.Fotorama.cache[src]=frameData.state="loaded",setTimeout((function(){$frame.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass(loadedClass+" "+(fullFLAG?loadedFullClass:loadedImgClass)),"stage"===type?triggerTriggerEvent("load"):(dataFrame.thumbratio===AUTO||!dataFrame.thumbratio&&opts.thumbratio===AUTO)&&(dataFrame.thumbratio=imgData.measures.ratio,reset())}),0)}function waitAndLoad(){var _i=10;waitFor((function(){return!touchedFLAG||!_i--&&!SLOW}),(function(){loaded()}))}}))}function spinnerSpin($el){$spinner.append(spinner.spin().el).appendTo($el)}function spinnerStop(){$spinner.detach(),spinner&&spinner.stop()}function updateFotoramaState(){var $frame=activeFrame.$stageFrame;$frame&&!$frame.data().state&&(spinnerSpin($frame),$frame.on("f:load f:error",(function(){$frame.off("f:load f:error"),spinnerStop()})))}function addNavFrameEvents(frame){addEnterUp(frame,onNavFrameClick),addFocus(frame,(function(){setTimeout((function(){lockScroll($nav)}),0),slideNavShaft({time:o_transitionDuration,guessIndex:$(this).data().eq,minMax:navShaftTouchTail})}))}function frameDraw(indexes,type){eachIndex(indexes,type,(function(i,index,dataFrame,$frame,key,frameData){if(!$frame){$frame=dataFrame[key]=$wrap[key].clone(),(frameData=$frame.data()).data=dataFrame;var frame=$frame[0];"stage"===type?(dataFrame.html&&$('<div class="'+htmlClass+'"></div>').append(dataFrame._html?$(dataFrame.html).removeAttr("id").html(dataFrame._html):dataFrame.html).appendTo($frame),dataFrame.caption&&$(div(captionClass,div(captionWrapClass,dataFrame.caption))).appendTo($frame),dataFrame.video&&$frame.addClass(stageFrameVideoClass).append($videoPlay.clone()),addFocus(frame,(function(){setTimeout((function(){lockScroll($stage)}),0),clickToShow({index:frameData.eq,user:!0})})),$stageFrame=$stageFrame.add($frame)):"navDot"===type?(addNavFrameEvents(frame),$navDotFrame=$navDotFrame.add($frame)):"navThumb"===type&&(addNavFrameEvents(frame),frameData.$wrap=$frame.children(":first"),$navThumbFrame=$navThumbFrame.add($frame),dataFrame.video&&frameData.$wrap.append($videoPlay.clone()))}}))}function callFit($img,measuresToFit,method,position){return $img&&$img.length&&fit($img,measuresToFit,method,position)}function stageFramePosition(indexes){eachIndex(indexes,"stage",(function(i,index,dataFrame,$frame,key,frameData){if($frame){var normalizedIndex=normalizeIndex(index),method=dataFrame.fit||opts.fit,position=dataFrame.position||opts.position;frameData.eq=normalizedIndex,toDetach.$stageFrame[normalizedIndex]=$frame.css($.extend({left:o_fade?0:getPosByIndex(index,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0))),isDetached($frame[0])&&($frame.appendTo($stageShaft),unloadVideo(dataFrame.$video)),callFit(frameData.$img,measures,method,position),callFit(frameData.$full,measures,method,position)}}))}function thumbsDraw(pos,loadFLAG){if("thumbs"===o_nav&&!isNaN(pos)){var leftLimit=-pos,rightLimit=-pos+measures.nw;$navThumbFrame.each((function(){var $this,thisData=$(this).data(),eq=thisData.eq,getSpecialMeasures=function(){return{h:o_thumbSide2,w:thisData.w}},specialMeasures=getSpecialMeasures(),dataFrame=data[eq]||{},method=dataFrame.thumbfit||opts.thumbfit,position=dataFrame.thumbposition||opts.thumbposition;specialMeasures.w=thisData.w,thisData.l+thisData.w<leftLimit||thisData.l>rightLimit||callFit(thisData.$img,specialMeasures,method,position)||loadFLAG&&loadImg([eq],"navThumb",getSpecialMeasures,method,position)}))}}function frameAppend($frames,$shaft,type){if(!frameAppend[type]){var thumbsFLAG="nav"===type&&o_navThumbs,left=0;$shaft.append($frames.filter((function(){for(var actual,$this=$(this),frameData=$this.data(),_i=0,_l=data.length;_i<_l;_i++)if(frameData.data===data[_i]){actual=!0,frameData.eq=_i;break}return actual||$this.remove()&&!1})).sort((function(a,b){return $(a).data().eq-$(b).data().eq})).each((function(){if(thumbsFLAG){var $this=$(this),frameData=$this.data(),thumbwidth=Math.round(o_thumbSide2*frameData.data.thumbratio)||o_thumbSide;frameData.l=left,frameData.w=thumbwidth,$this.css({width:thumbwidth}),left+=thumbwidth+opts.thumbmargin}}))),frameAppend[type]=!0}}function getDirection(x){return x-stageLeft>measures.w/3}function disableDirrection(i){return!(o_loop||activeIndex+i&&activeIndex-size+i||$videoPlaying)}function arrsUpdate(){var disablePrev=disableDirrection(0),disableNext=disableDirrection(1);$arrPrev.toggleClass(arrDisabledClass,disablePrev).attr(disableAttr(disablePrev)),$arrNext.toggleClass(arrDisabledClass,disableNext).attr(disableAttr(disableNext))}function stageWheelUpdate(){stageWheelTail.ok&&(stageWheelTail.prevent={"<":disableDirrection(0),">":disableDirrection(1)})}function getNavFrameBounds($navFrame){var navFrameData=$navFrame.data(),left,width;return o_navThumbs?(left=navFrameData.l,width=navFrameData.w):(left=$navFrame.position().left,width=$navFrame.width()),{c:left+width/2,min:-left+10*opts.thumbmargin,max:-left+measures.w-width-10*opts.thumbmargin}}function slideThumbBorder(time){var navFrameData=activeFrame[navFrameKey].data();slide($thumbBorder,{time:1.2*time,pos:navFrameData.l,width:navFrameData.w-2*opts.thumbborderwidth})}function slideNavShaft(options){var $guessNavFrame=data[options.guessIndex][navFrameKey];if($guessNavFrame){var overflowFLAG=navShaftTouchTail.min!==navShaftTouchTail.max,minMax=options.minMax||overflowFLAG&&getNavFrameBounds(activeFrame[navFrameKey]),l=overflowFLAG&&(options.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((options.coo||measures.nw/2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max)),pos=overflowFLAG&&minMaxLimit(l,navShaftTouchTail.min,navShaftTouchTail.max),time=1.1*options.time;slide($navShaft,{time:time,pos:pos||0,onEnd:function(){thumbsDraw(pos,!0)}}),setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max)),slideNavShaft.l=l}}function navUpdate(){deactivateFrames(navFrameKey),toDeactivate[navFrameKey].push(activeFrame[navFrameKey].addClass(activeClass))}function deactivateFrames(key){for(var _toDeactivate=toDeactivate[key];_toDeactivate.length;)_toDeactivate.shift().removeClass(activeClass)}function detachFrames(key){var _toDetach=toDetach[key];$.each(activeIndexes,(function(i,index){delete _toDetach[normalizeIndex(index)]})),$.each(_toDetach,(function(index,$frame){delete _toDetach[index],$frame.detach()}))}function stageShaftReposition(skipOnEnd){repositionIndex=dirtyIndex=activeIndex;var $frame=activeFrame.$stageFrame;$frame&&(deactivateFrames("$stageFrame"),toDeactivate.$stageFrame.push($frame.addClass(activeClass)),skipOnEnd||that.show.onEnd(!0),stop($stageShaft,0,!0),detachFrames("$stageFrame"),stageFramePosition(activeIndexes),setStageShaftMinmaxAndSnap(),setNavShaftMinMax())}function extendMeasures(options,measuresArray){options&&$.each(measuresArray,(function(i,measures){measures&&$.extend(measures,{width:options.width||measures.width,height:options.height,minwidth:options.minwidth,maxwidth:options.maxwidth,minheight:options.minheight,maxheight:options.maxheight,ratio:getRatio(options.ratio)})}))}function triggerEvent(event,extra){$fotorama.trigger("fotorama:"+event,[that,extra])}function onTouchStart(){clearTimeout(onTouchEnd.t),touchedFLAG=1,opts.stopautoplayontouch?that.stopAutoplay():pausedAutoplayFLAG=!0}function onTouchEnd(){touchedFLAG&&(opts.stopautoplayontouch||(releaseAutoplay(),changeAutoplay()),onTouchEnd.t=setTimeout((function(){touchedFLAG=0}),550))}function releaseAutoplay(){pausedAutoplayFLAG=!(!$videoPlaying&&!stoppedAutoplayFLAG)}function changeAutoplay(){if(clearTimeout(changeAutoplay.t),waitFor.stop(changeAutoplay.w),opts.autoplay&&!pausedAutoplayFLAG){that.autoplay||(that.autoplay=!0,triggerEvent("startautoplay"));var _activeIndex=activeIndex,frameData=activeFrame.$stageFrame.data();changeAutoplay.w=waitFor((function(){return frameData.state||_activeIndex!==activeIndex}),(function(){changeAutoplay.t=setTimeout((function(){if(!pausedAutoplayFLAG&&_activeIndex===activeIndex){var _nextAutoplayIndex=nextAutoplayIndex,nextFrameData=data[_nextAutoplayIndex].$stageFrame.data();changeAutoplay.w=waitFor((function(){return nextFrameData.state||_nextAutoplayIndex!==nextAutoplayIndex}),(function(){pausedAutoplayFLAG||_nextAutoplayIndex!==nextAutoplayIndex||that.show(o_loop?getDirectionSign(!o_rtl):nextAutoplayIndex)}))}}),opts.autoplay)}))}else that.autoplay&&(that.autoplay=!1,triggerEvent("stopautoplay"))}function cancelFullScreen(){that.fullScreen&&(that.fullScreen=!1,FULLSCREEN&&fullScreenApi.cancel(fotorama),$BODY.removeClass("fullscreen"),$HTML.removeClass("fullscreen"),$fotorama.removeClass(fullscreenClass).insertAfter($anchor),measures=$.extend({},measuresStash),unloadVideo($videoPlaying,!0,!0),updateTouchTails("x",!1),that.resize(),loadImg(activeIndexes,"stage"),lockScroll($WINDOW,scrollLeft,scrollTop),triggerEvent("fullscreenexit"))}function setShadow($el,edge){o_shadows&&($el.removeClass(shadowsLeftClass+" "+shadowsRightClass),edge&&!$videoPlaying&&$el.addClass(edge.replace(/^|\s/g," "+shadowsClass+"--")))}function unloadVideo($video,unloadActiveFLAG,releaseAutoplayFLAG){unloadActiveFLAG&&($wrap.removeClass(wrapVideoClass),$videoPlaying=!1,stageNoMove()),$video&&$video!==$videoPlaying&&($video.remove(),triggerEvent("unloadvideo")),releaseAutoplayFLAG&&(releaseAutoplay(),changeAutoplay())}function toggleControlsClass(FLAG){$wrap.toggleClass(wrapNoControlsClass,FLAG)}function stageCursor(e){if(!stageShaftTouchTail.flow){var x=e?e.pageX:stageCursor.x,pointerFLAG=x&&!disableDirrection(getDirection(x))&&opts.click;stageCursor.p!==pointerFLAG&&$stage.toggleClass(pointerClass,pointerFLAG)&&(stageCursor.p=pointerFLAG,stageCursor.x=x)}}function clickToShow(showOptions){clearTimeout(clickToShow.t),opts.clicktransition&&opts.clicktransition!==opts.transition?setTimeout((function(){var _o_transition=opts.transition;that.setOptions({transition:opts.clicktransition}),o_transition=_o_transition,clickToShow.t=setTimeout((function(){that.show(showOptions)}),10)}),0):that.show(showOptions)}function onStageTap(e,toggleControlsFLAG){var target=e.target,$target;$(target).hasClass(videoPlayClass)?that.playVideo():target===fullscreenIcon?that.toggleFullScreen():$videoPlaying?target===videoClose&&unloadVideo($videoPlaying,!0,!0):toggleControlsFLAG?toggleControlsClass():opts.click&&clickToShow({index:e.shiftKey||getDirectionSign(getDirection(e._x)),slow:e.altKey,user:!0})}function updateTouchTails(key,value){stageShaftTouchTail[key]=navShaftTouchTail[key]=value}function onNavFrameClick(e){var index;clickToShow({index:$(this).data().eq,slow:e.altKey,user:!0,coo:e._x-$nav.offset().left})}function onArrClick(e){clickToShow({index:$arrs.index(this)?">":"<",slow:e.altKey,user:!0})}function addFocusOnControls(el){addFocus(el,(function(){setTimeout((function(){lockScroll($stage)}),0),toggleControlsClass(!1)}))}function reset(){if(setData(),setOptions(),!reset.i){reset.i=!0;var _startindex=opts.startindex;(_startindex||opts.hash&&location.hash)&&(startIndex=getIndexFromHash(_startindex||location.hash.replace(/^#/,""),data,0===that.index||_startindex,_startindex)),activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(startIndex)||0}if(size){if(changeToRtl())return;$videoPlaying&&unloadVideo($videoPlaying,!0),activeIndexes=[],detachFrames("$stageFrame"),reset.ok=!0,that.show({index:activeIndex,time:0}),that.resize()}else that.destroy()}function changeToRtl(){if(!changeToRtl.f===o_rtl)return changeToRtl.f=o_rtl,activeIndex=size-1-activeIndex,that.reverse(),!0}function ready(){ready.ok||(ready.ok=!0,triggerEvent("ready"))}$wrap.$stageFrame=$(div(stageFrameClass)),$wrap.$navThumbFrame=$(div(navFrameClass+" "+navFrameThumbClass+buttonAttributes,div(thumbClass))),$wrap.$navDotFrame=$(div(navFrameClass+" "+navFrameDotClass+buttonAttributes,div(dotClass))),toDeactivate.$stageFrame=[],toDeactivate.$navThumbFrame=[],toDeactivate.$navDotFrame=[],toDetach.$stageFrame={},$wrap.addClass(CSS3?wrapCss3Class:wrapCss2Class).toggleClass(wrapNoControlsClass,!opts.controlsonstart),fotoramaData.fotorama=this,that.startAutoplay=function(interval){return that.autoplay?this:(pausedAutoplayFLAG=stoppedAutoplayFLAG=!1,setAutoplayInterval(interval||opts.autoplay),changeAutoplay(),this)},that.stopAutoplay=function(){return that.autoplay&&(pausedAutoplayFLAG=stoppedAutoplayFLAG=!0,changeAutoplay()),this},that.show=function(options){var index;"object"!=typeof options?(index=options,options={}):index=options.index,index=">"===index?dirtyIndex+1:"<"===index?dirtyIndex-1:"<<"===index?0:">>"===index?size-1:index,index=void 0===(index=isNaN(index)?getIndexFromHash(index,data,!0):index)?activeIndex||0:index,that.activeIndex=activeIndex=edgeIndex(index),prevIndex=getPrevIndex(activeIndex),nextIndex=getNextIndex(activeIndex),nextAutoplayIndex=normalizeIndex(activeIndex+(o_rtl?-1:1)),activeIndexes=[activeIndex,prevIndex,nextIndex],dirtyIndex=o_loop?index:activeIndex;var diffIndex=Math.abs(lastActiveIndex-dirtyIndex),time=getNumber(options.time,(function(){return Math.min(o_transitionDuration*(1+(diffIndex-1)/12),2*o_transitionDuration)})),overPos=options.overPos;options.slow&&(time*=10);var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;unloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i),frameDraw(activeIndexes,"stage"),stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]),updateTouchTails("go",!0),silent||triggerEvent("show",{user:options.user,time:time}),pausedAutoplayFLAG=!0;var onEnd=that.show.onEnd=function(skipReposition){if(!onEnd.ok){if(onEnd.ok=!0,skipReposition||stageShaftReposition(!0),silent||triggerEvent("showend",{user:options.user}),!skipReposition&&o_transition&&o_transition!==opts.transition)return that.setOptions({transition:o_transition}),void(o_transition=!1);updateFotoramaState(),loadImg(activeIndexes,"stage"),updateTouchTails("go",!1),stageWheelUpdate(),stageCursor(),releaseAutoplay(),changeAutoplay()}},$activeFrame,$prevActiveFrame;o_fade?fade(activeFrame.$stageFrame,activeIndex!==lastActiveIndex?data[lastActiveIndex].$stageFrame:null,$stageFrame,{time:time,method:opts.transition,onEnd:onEnd},fadeStack):slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:overPos,time:time,onEnd:onEnd});if(arrsUpdate(),o_nav){navUpdate();var guessIndex=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:time,coo:guessIndex!==activeIndex&&options.coo,guessIndex:void 0!==options.coo?guessIndex:activeIndex,keep:silent}),o_navThumbs&&slideThumbBorder(time)}return showedFLAG=void 0!==lastActiveIndex&&lastActiveIndex!==activeIndex,lastActiveIndex=activeIndex,opts.hash&&showedFLAG&&!that.eq&&setHash(activeFrame.id||activeIndex+1),this},that.requestFullScreen=function(){return o_allowFullScreen&&!that.fullScreen&&(scrollTop=$WINDOW.scrollTop(),scrollLeft=$WINDOW.scrollLeft(),lockScroll($WINDOW),updateTouchTails("x",!0),measuresStash=$.extend({},measures),$fotorama.addClass(fullscreenClass).appendTo($BODY.addClass("fullscreen")),$HTML.addClass("fullscreen"),unloadVideo($videoPlaying,!0,!0),that.fullScreen=!0,o_nativeFullScreen&&fullScreenApi.request(fotorama),that.resize(),loadImg(activeIndexes,"stage"),updateFotoramaState(),triggerEvent("fullscreenenter")),this},that.cancelFullScreen=function(){return o_nativeFullScreen&&fullScreenApi.is()?fullScreenApi.cancel(document):cancelFullScreen(),this},that.toggleFullScreen=function(){return that[(that.fullScreen?"cancel":"request")+"FullScreen"]()},addEvent(document,fullScreenApi.event,(function(){!data||fullScreenApi.is()||$videoPlaying||cancelFullScreen()})),that.resize=function(options){if(!data)return this;var time=arguments[1]||0,setFLAG=arguments[2];extendMeasures(that.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:optionsToLowerCase(options),[measures,setFLAG||that.fullScreen||opts]);var width=measures.width,height=measures.height,ratio=measures.ratio,windowHeight=$WINDOW.height()-(o_nav?$nav.height():0);return measureIsValid(width)&&($wrap.addClass(wrapOnlyActiveClass).css({width:width,minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||99999}),width=measures.W=measures.w=$wrap.width(),measures.nw=o_nav&&numberFromWhatever(opts.navwidth,width)||width,opts.glimpse&&(measures.w-=Math.round(2*(numberFromWhatever(opts.glimpse,width)||0))),$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/2}),(height=(height=numberFromWhatever(height,windowHeight))||ratio&&width/ratio)&&(width=Math.round(width),height=measures.h=Math.round(minMaxLimit(height,numberFromWhatever(measures.minheight,windowHeight),numberFromWhatever(measures.maxheight,windowHeight))),$stage.stop().animate({width:width,height:height},time,(function(){$wrap.removeClass(wrapOnlyActiveClass)})),stageShaftReposition(),o_nav&&($nav.stop().animate({width:measures.nw},time),slideNavShaft({guessIndex:activeIndex,time:time,keep:!0}),o_navThumbs&&frameAppend.nav&&slideThumbBorder(time)),measuresSetFLAG=setFLAG||!0,ready())),stageLeft=$stage.offset().left,this},that.setOptions=function(options){return $.extend(opts,options),reset(),this},that.shuffle=function(){return data&&shuffle(data)&&reset(),this},that.destroy=function(){return that.cancelFullScreen(),that.stopAutoplay(),data=that.data=null,appendElements(),activeIndexes=[],detachFrames("$stageFrame"),reset.ok=!1,this},that.playVideo=function(){var dataFrame=activeFrame,video=dataFrame.video,_activeIndex=activeIndex;return"object"==typeof video&&dataFrame.videoReady&&(o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen(),waitFor((function(){return!fullScreenApi.is()||_activeIndex!==activeIndex}),(function(){_activeIndex===activeIndex&&(dataFrame.$video=dataFrame.$video||$($.Fotorama.jst.video(video)),dataFrame.$video.appendTo(dataFrame.$stageFrame),$wrap.addClass(wrapVideoClass),$videoPlaying=dataFrame.$video,stageNoMove(),$arrs.blur(),$fullscreenIcon.blur(),triggerEvent("loadvideo"))}))),this},that.stopVideo=function(){return unloadVideo($videoPlaying,!0,!0),this},$stage.on("mousemove",stageCursor),stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($stage,result.edge)},onTouchEnd:onTouchEnd,onEnd:function(result){setShadow($stage);var toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows&&"always"!==opts.arrows;if(result.moved||toggleControlsFLAG&&result.pos!==result.newPos&&!result.control){var index=getIndexByPos(result.newPos,measures.w,opts.margin,repositionIndex);that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:!0})}else result.aborted||result.control||onStageTap(result.startEvent,toggleControlsFLAG)},timeLow:1,timeHigh:1,friction:2,select:"."+selectClass+", ."+selectClass+" *",$wrap:$stage}),navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($nav,result.edge)},onTouchEnd:onTouchEnd,onEnd:function(result){function onEnd(){slideNavShaft.l=result.newPos,releaseAutoplay(),changeAutoplay(),thumbsDraw(result.newPos,!0)}if(result.moved)result.pos!==result.newPos?(pausedAutoplayFLAG=!0,slide($navShaft,{time:result.time,pos:result.newPos,overPos:result.overPos,onEnd:onEnd}),thumbsDraw(result.newPos),o_shadows&&setShadow($nav,findShadowEdge(result.newPos,navShaftTouchTail.min,navShaftTouchTail.max))):onEnd();else{var target=result.$target.closest("."+navFrameClass,$navShaft)[0];target&&onNavFrameClick.call(target,result.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav}),stageWheelTail=wheel($stage,{shift:!0,onEnd:function(e,direction){onTouchStart(),onTouchEnd(),that.show({index:direction,slow:e.altKey})}}),navWheelTail=wheel($nav,{onEnd:function(e,direction){onTouchStart(),onTouchEnd();var newPos=stop($navShaft)+.25*direction;$navShaft.css(getTranslate(minMaxLimit(newPos,navShaftTouchTail.min,navShaftTouchTail.max))),o_shadows&&setShadow($nav,findShadowEdge(newPos,navShaftTouchTail.min,navShaftTouchTail.max)),navWheelTail.prevent={"<":newPos>=navShaftTouchTail.max,">":newPos<=navShaftTouchTail.min},clearTimeout(navWheelTail.t),navWheelTail.t=setTimeout((function(){slideNavShaft.l=newPos,thumbsDraw(newPos,!0)}),250),thumbsDraw(newPos)}}),$wrap.hover((function(){setTimeout((function(){touchedFLAG||toggleControlsClass(!(hoverFLAG=!0))}),0)}),(function(){hoverFLAG&&toggleControlsClass(!(hoverFLAG=!1))})),smartClick($arrs,(function(e){stopEvent(e),onArrClick.call(this,e)}),{onStart:function(){onTouchStart(),stageShaftTouchTail.control=!0},onTouchEnd:onTouchEnd}),$arrs.each((function(){addEnterUp(this,(function(e){onArrClick.call(this,e)})),addFocusOnControls(this)})),addEnterUp(fullscreenIcon,that.toggleFullScreen),addFocusOnControls(fullscreenIcon),$.each("load push pop shift unshift reverse sort splice".split(" "),(function(i,method){that[method]=function(){return data=data||[],"load"!==method?Array.prototype[method].apply(data,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(data=clone(arguments[0])),reset(),that}})),reset()},$.fn.fotorama=function(opts){return this.each((function(){var that=this,$fotorama=$(this),fotoramaData=$fotorama.data(),fotorama=fotoramaData.fotorama;fotorama?fotorama.setOptions(opts,!0):waitFor((function(){return!isHidden(that)}),(function(){fotoramaData.urtext=$fotorama.html(),new $.Fotorama($fotorama,$.extend({},OPTIONS,window.fotoramaDefaults,opts,fotoramaData))}))}))},$.Fotorama.instances=[],$.Fotorama.cache={},$.Fotorama.measures={},($=$||{}).Fotorama=$.Fotorama||{},$.Fotorama.jst=$.Fotorama.jst||{},$.Fotorama.jst.style=function(v){var __t,__p="",__e=_.escape;return __p+=".fotorama"+(null==(__t=v.s)?"":__t)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(__t=v.m)?"":__t)+"px;\nheight:"+(null==(__t=v.h)?"":__t)+"px}\n.fotorama"+(null==(__t=v.s)?"":__t)+" .fotorama__thumb-border{\nheight:"+(null==(__t=v.h-v.b*(v.q?0:2))?"":__t)+"px;\nborder-width:"+(null==(__t=v.b)?"":__t)+"px;\nmargin-top:"+(null==(__t=v.m)?"":__t)+"px}"},$.Fotorama.jst.video=function(v){var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}return __p+='<div class="fotorama__video"><iframe src="',print(("youtube"==v.type?v.p+"youtube.com/embed/"+v.id+"?autoplay=1":"vimeo"==v.type?v.p+"player.vimeo.com/video/"+v.id+"?autoplay=1&badge=0":v.id)+(v.s&&"custom"!=v.type?"&"+v.s:"")),__p+='" frameborder="0" allowfullscreen></iframe></div>\n'},$((function(){$('.fotorama:not([data-auto="false"])').fotorama()}))}(window,document,location,"undefined"!=typeof jQuery&&jQuery);
//# sourceMappingURL=fotorama2.min.js.map