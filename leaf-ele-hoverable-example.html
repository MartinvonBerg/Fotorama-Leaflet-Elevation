<!DOCTYPE html>
<html>

<head>
	<title>leaflet-elevation.js</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style>
		html,
		body,
		#map,
		#elevation-div {
			height: 100%;
			width: 100%;
			padding: 0px;
			margin: 0px;
		}
	</style>

	<!-- Leaflet (JS/CSS) -->
	<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

	<!-- Leaflet-UI -->
	<script src="https://unpkg.com/leaflet-ui/dist/leaflet-ui.js"></script>

	<style>

		.leaflet-right .leaflet-control-layers-list {
			max-width: 250px;
			max-height: 25vh;
			overflow: auto;
		}

		.leaflet-tooltip {
			font-weight: 700;
		}

		#map {
			height: 75%;
		}

		#elevation-div {
			height: 25%;
			font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
		}

		.chart-placeholder {
			top: 20%;
			position: absolute;
			text-align: center;
			left: 0;
			right: 0;
			font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
			font-style: italic;
			opacity: 0.5;
			font-size: 0.9rem;
		}
	</style>

</head>

<body>

	<div id="map"></div>
	<div id="elevation-div" class="leaflet-control elevation"><p class="chart-placeholder">move mouse over a track...</p></div>

	<script>
		var opts = {
			map: {
				center: [41.4583, 12.7059],
				zoom: 5,
				mapTypeId: 'topo',
				fullscreenControl: false,
				searchControl: false,
				loadingControl: false,
				plugins: [
					"d3@4.13.0/build/d3.min.js",
					"leaflet-gpx@1.5.0/gpx.js",
					"leaflet-geometryutil@0.9.1/src/leaflet.geometryutil.js",
					"@raruto/leaflet-elevation@1.5.0/dist/leaflet-elevation.min.css",
					"@raruto/leaflet-elevation@1.5.0/dist/leaflet-elevation.min.js",
					"@raruto/leaflet-elevation@1.5.0/libs/leaflet-gpxgroup.min.js",
					"@raruto/leaflet-elevation@1.5.0/libs/leaflet-distance-marker.min.css",
					"@raruto/leaflet-elevation@1.5.0/libs/leaflet-distance-marker.min.js",
				],
			},
			points: {
				icon: {
					iconUrl: 'https://unpkg.com/@raruto/leaflet-elevation@1.3.5/images/elevation-poi.png',
					iconSize: [12, 12],
				},
			},
			elevation: {
				theme: "yellow-theme",
				detachedView: true,
				elevationDiv: '#elevation-div',
				followPositionMarker: true,
				zFollow: 15,
				legend: false,
			},
			markers: {
				startIconUrl: null, // 'http://mpetazzoni.github.io/leaflet-gpx/pin-icon-start.png',
				endIconUrl: null, // 'http://mpetazzoni.github.io/leaflet-gpx/pin-icon-end.png',
				shadowUrl: null, // 'http://mpetazzoni.github.io/leaflet-gpx/pin-shadow.png',
			}
		};

		var tracks = [
			"tracks/20130922.gpx",
			"tracks/20131006.gpx",
			"tracks/20131110.gpx",
			"tracks/20131229.gpx",
			"tracks/20140126.gpx",
			"tracks/20140209.gpx",
			"tracks/20140316.gpx",
			"tracks/20140406.gpx",
			"tracks/20140518.gpx",
			"tracks/20140615.gpx",
			"tracks/20140713.gpx",
			"tracks/20140713a.gpx",
			"tracks/20140831.gpx",
			"tracks/20141123.gpx",
			"tracks/20141229.gpx",
			"tracks/20150215.gpx",
			"tracks/20150308.gpx",
			"tracks/20150419.gpx",
			"tracks/20150510.gpx",
			"tracks/20150927.gpx",
			"tracks/20151011.gpx",
			"tracks/20151227.gpx",
			"tracks/20160417.gpx",
			"tracks/20160508.gpx",
		];

		var points = [
			{latlng:[47.5854438, 18.8260240], name:"Éles-kő"},
			{latlng:[47.5838863, 18.8235221], name:"Ilona-lak"},
			{latlng:[47.5689002, 18.8909285], name:"Bronz-barlang"},
			{latlng:[47.5574055, 18.8954788], name:"Karády-lak"},
			{latlng:[47.5860042, 18.8590258], name:"Kereszt a Kutya-hegyi kőfejtőnél"},
			{latlng:[47.5946092, 18.8383717], name:"Kutya-hegyi zsomboly"},
			{latlng:[47.5852204, 18.8420916], name:"vaditató"},
			{latlng:[47.5675421, 18.8644739], name:"mészégető"},
			{latlng:[47.5568284, 18.8683407], name:"festékégető"},
			{latlng:[47.5627022, 18.8804863], name:"festékégető"},
			{latlng:[47.5825126, 18.8512647], name:"kőfejtő"},
			{latlng:[47.5966170, 18.8405121], name:"barlang"},
			{latlng:[47.5692769, 18.9233352], name:"vaslelőhely"},
			{latlng:[47.5609284, 18.9319601], name:"Hét-lyuk zsomboly"},
			{latlng:[47.5532424, 18.8973270], name:"festékégető"},
			{latlng:[47.5372269, 18.8914775], name:"katonasírok"},
			{latlng:[47.5934486, 18.8812427], name:"Fülkés-kő"},
		];

		var map = L.map('map', opts.map);
		var routes;

		map.on('plugins_loaded', function(e) {

			routes = L.gpxGroup(tracks, {
				points: points,
				points_options: opts.points,
				elevation: true,
				elevation_options: opts.elevation,
				marker_options: opts.markers,
				legend: true,
				distanceMarkers: false,
			});

			map.on('eledata_added eledata_clear', function(e) {
				var p = document.querySelector(".chart-placeholder");
				if(p) {
					p.style.display = e.type=='eledata_added' ? 'none' : '';
				}
			});

			routes.addTo(map);

			map.attributionControl.addAttribution('Map Data: &copy; <a href="https://github.com/adoroszlai">Attila Doroszlai</a> (<a href="https://github.com/adoroszlai/joebed/blob/gh-pages/LICENSE.md">MIT License</a>)');

		});

	</script>

</body>

</html>